# 变量和类型
在程序设计中，变量是一种存储数据的载体

计算机中的变量是实际存在的数据或者说是存储器中存储数据的一块内存空间，变量的值可以被读取和修改，这是所有计算和控制的基础

计算机能处理的数据有很多种类型，除了数值之外还可以处理文本、图形、音频、视频等各种各样的数据，那么不同的数据就需要定义不同的存储类型

Python中的数据类型很多，而且也允许自定义新的数据类型（这一点在后面会讲到），先介绍几种常用的数据类型：

## 整型
* 整数
任意大小的整数
支持不同·进制：
二进制`0b100`=4
八进制`0o100`=64
十进制`100`
十六进制`0x100`=256

## 浮点型
如`123.456`
支持科学计数法（`1.23456e2`）。

## 字符串型（重要）
以单引号或双引号括起来的任意文本，比如`'hello'`和`"hello"`
用于记录文本信息和任意的字节集合
是序列（序列中的元素根据他们的相对位置进行存储和读取）
严格来说，字符串是

原始字符串表示、字节字符串表示、Unicode字符串表示
### 转义
要标示引号本身，需要进行“转义”，即在前面加一个 `\`。 

在 Python shell 中，字符串定义和输出字符串看起来可能不同。

[`print()`](https://docs.python.org/zh-cn/3/library/functions.html#print "print") 函数会略去标示用的引号，并打印经过转义的特殊字符，产生更为易读的输出:
![[Pasted image 20231117122424.png]]

如果不希望前置 `\` 的字符转义成特殊字符
可以使用 _原始字符串_，在引号前添加 `r` ：
![[Pasted image 20231117122453.png]]

字符串字面值可以包含多行。 
一种实现方式是使用三重引号：`"""..."""` 或 `'''...'''`。
```python
print("""
Usage: thingy [OPTIONS]
     -h                        Display this usage message
     -H hostname               Hostname to connect to
""")
```
![[Pasted image 20231117122851.png]]

字符串中自动包括行结束符，但也可以在换行的地方添加一个 `\` 来避免
参见以下示例：
```python
print("""\
Usage: thingy [OPTIONS]
     -h                        Display this usage message
     -H hostname               Hostname to connect to
""")
```
输出如下（注意开始的换行符没有被包括在内）：
![[Pasted image 20231117122915.png]]

### 字符串运算
可以用 `+` 合并（粘到一起），也可以用 `*` 重复：
```python
3 * 'um' + 'ium'
```
>加号对不同的的对象有不同的含义 , 数字是相加 , 字符串是拼接
>这就是python的多态 : 操作的意义取决于被操作的对象 
>这种多态提供了巨大的简洁性和灵活性

相邻的两个或多个 _字符串字面值_ 会自动合并：
```python
print('py' 'thon')
```
>字面值：用引号标注的值

可用于拼接分隔开的长字符串：
```python
print('Put several strings within parentheses'  
  'to have them joined together.')
```

### 字符串索引
字符串支持 _索引_ （下标访问），第一个字符的索引是 0。
单字符没有专用的类型，就是长度为一的字符串：
```python
word = 'python'
print(word[0])#会输出'p'
print(word[5])#会输出'n'
```

支持反向索引，用负数索引时，从右边开始计数：
注意，-0 和 0 一样，因此，负数索引从 -1 开始
```python
word = 'python'
print(word[-1])#会输出'n'
print(word[-6])#会输出'p'
```

负的索引号会和字符串的长度相加，因此以下操作是等效的：
```python
word = 'python'
print(word[-2])#会输出'o'
print(word[len(word)-2])#会输出'o'
```
>在方括号中可以使用任意表达式，例如`[len(word)-1]`。
>只要需要一个值，字面值，变量，表达式都可以，python在这方面完全通用

### 字符串切片
除了索引操作，还支持 _切片_。 索引用来获取单个字符，而 _切片_ 允许你获取子字符串:
```python
word = 'python'
print(word[0:2])#会输出'py'
print(word[2:5])#会输出'tho'
```
**注意**：切片是左闭右开的，含左不含右

切片索引的默认值很有用；省略开始索引时，默认值为 0，省略结束索引时，默认为到字符串的结尾：
```python
word = 'python'
print(word[:3])#会输出'pyt'
print(word[4:])#会输出'on'
print(word[-3:])#会输出'hon'
```

还可以这样理解切片，
索引指向的是字符 _之间_ ，第一个字符的左侧标为 0，
最后一个字符的右侧标为 _n_ ，_n_ 是字符串长度。
例如：
![[Pasted image 20231117141143.png]]
第一行数字是字符串中索引 0到6 的位置，
第二行数字是对应的负数索引位置。_i_ 到 _j_ 的切片由 _i_ 和 _j_ 之间所有对应的字符组成。
对于使用非负索引的切片，如果两个索引都不越界，切片长度就是起止索引之差。
例如， `word[1:3]` 的长度是 2。

索引越界会报错：
```python
word = 'python'
word[42]

# Traceback (most recent call last):
#  File "<stdin>", line 1, in <module>
# IndexError: string index out of range
```
但切片会自动处理越界索引：
```python
word[4:42] # 'on'
word[42:] # ''
```

### 字符的不可变性
Python 字符串不能修改，是 [immutable不可变对象](https://docs.python.org/zh-cn/3/glossary.html#term-immutable) 。
>具有固定值的对象   不能被改变。
>
>不可变对象 : 数字 , 字符串和元组
>可变对象 : 列表 , 字典 , 集合
>
>如果必须存储一个不同的值，则必须创建新的对象。
>它们在需要常量哈希值的地方起着重要作用，例如作为字典中的键。

因此，为字符串中某个索引位置赋值会报错：
```python
word = 'python'
word[0] = 'J'
#Traceback (most recent call last):
#  File "<stdin>", line 1, in <module>
#TypeError: 'str' object does not support item assignment
word[2:] = 'py'
#Traceback (most recent call last):
#  File "<stdin>", line 1, in <module>
#TypeError: 'str' object does not support item assignment
```
要生成不同的字符串，应新建一个字符串：
```python
#切片
word = 'python'
'J' + word[1:]#Jython
word[:2] + 'py'#pypy
```
或者用join()方法
用于将序列中的元素以指定的字符连接生成一个新的字符串
```python
word = 'python'  
word1 = ''  
word2 = '-'  
l = list(word)  
l[0] = 'J'  
print(word1.join(l))#Jython
print(word2.join(l))#J-y-t-h-o-n
```

内置函数 [`len()`](https://docs.python.org/zh-cn/3/library/functions.html#len "len") 返回字符串的长度：
```python
s = 'supercalifragilisticexpialidocious'
len(s)#34
```

## 布尔型
布尔值只有`True`、`False`两种值，要么是`True`，要么是`False`，在Python中，可以直接用`True`、`False`表示布尔值（请注意大小写），也可以通过布尔运算计算出来（例如`3 < 5`会产生布尔值`True`，而`2 == 1`会产生布尔值`False`）。

## 复数型
形如`3+5j`，跟数学上的复数表示一样，唯一不同的是虚部的`i`换成了`j`。实际上，这个类型并不常用，大家了解一下就可以了

# 变量命名

对于每个变量需要给它取一个名字，就如同每个人都有属于自己的响亮的名字一样
在Python中，变量命名需要遵循以下这些必须遵守硬性规则和强烈建议遵守的非硬性规则

- 硬性规则：
    - 变量名由字母（广义的Unicode字符，不包括特殊字符）、数字和下划线构成，数字不能开头。
    - 大小写敏感（大写的`a`和小写的`A`是两个不同的变量）。
    - 不要跟关键字（有特殊含义的单词，后面会讲到）和系统保留字（如函数、模块等的名字）冲突。
- PEP 8要求：
    - 用小写字母拼写，多个单词用下划线连接。
    - 受保护的实例属性用单个下划线开头（后面会讲到）。
    - 私有的实例属性用两个下划线开头（后面会讲到）。

当然，作为一个程序员，给变量（事实上应该是所有的标识符）命名时做到**见名知意**也是非常重要的。

## 变量的使用
下面通过几个例子来说明变量的类型和变量使用。
```python
"""
使用变量保存数据并进行加减乘除运算
"""
a = 321
b = 12
print(a + b)    # 333
print(a - b)    # 309
print(a * b)    # 3852
print(a / b)    # 26.75
```
在Python中可以使用`type`函数对变量的类型进行检查。
程序设计中函数的概念跟数学上函数的概念是一致的，数学上的函数相信大家并不陌生，它包括了函数名、自变量和因变量。
如果暂时不理解这个概念也不要紧，我们会在后续的章节中专门讲解函数的定义和使用。
```python
"""
使用type()检查变量的类型
"""
a = 100
b = 12.345
c = 1 + 5j
d = 'hello, world'
e = True
print(type(a))    # <class 'int'>
print(type(b))    # <class 'float'>
print(type(c))    # <class 'complex'>
print(type(d))    # <class 'str'>
print(type(e))    # <class 'bool'>
```
可以使用Python中内置的函数对变量类型进行转换。

- `int()`：将一个数值或字符串转换成整数，可以指定进制。
- `float()`：将一个字符串转换成浮点数。
- `str()`：将指定的对象转换成字符串形式，可以指定编码。
- `chr()`：将整数转换成该编码对应的字符串（一个字符）。
- `ord()`：将字符串（一个字符）转换成对应的编码（整数）。

下面的代码通过键盘输入两个整数来实现对两个整数的算术运算。
```python
"""
使用input()函数获取键盘输入(字符串)
使用int()函数将输入的字符串转换成整数
使用print()函数输出带占位符的字符串
"""
a = int(input('a = '))
b = int(input('b = '))
print('%d + %d = %d' % (a, b, a + b))
print('%d - %d = %d' % (a, b, a - b))
print('%d * %d = %d' % (a, b, a * b))
print('%d / %d = %f' % (a, b, a / b))
print('%d // %d = %d' % (a, b, a // b))
print('%d %% %d = %d' % (a, b, a % b))
print('%d ** %d = %d' % (a, b, a ** b))
```

**说明**：上面的print函数中输出的字符串使用了占位符语法，其中`%d`是整数的占位符，`%f`是小数的占位符，`%%`表示百分号（因为百分号代表了占位符，所以带占位符的字符串中要表示百分号必须写成`%%`），字符串之后的`%`后面跟的变量值会替换掉占位符然后输出到终端中，运行上面的程序，看看程序执行结果就明白啦。

# 运算符
Python支持多种运算符，下表大致按照优先级从高到低的顺序列出了所有的运算符，

|运算符|描述|
|---|---|
|`[]` ,`[:]`|下标，切片|
|`**`|指数|
|`~`,`+`,`-`|按位取反, 正负号|
|`*`,`/`,`%`,`//`|乘，除，模，整除|
|`+`,`-`|加，减|
|`>>`,`<<`|右移，左移|
|`&`|按位与|
|`^`,`\|`|按位异或，按位或|
|`<=`,`<`,`>`,`>=`|小于等于，小于，大于，大于等于|
|`==`,`!=`|等于，不等于|
|`is`,`is not`|身份运算符|
|`in`,`not in`|成员运算符|
|`not`,`or`,`and`|逻辑运算符|
|`=` `+=` `-=` `*=` `/=` `%=` `//=` `**=` `&=` `|= ^= >>= <<=`|

> **说明：** 在实际开发中，如果实在搞不清楚运算符的优先级，使用括号来确保运算的执行顺序。比如 `**` 比 `-` 的优先级更高, 所以 `-3**2` 会被解释成 `-(3**2)` ，因此，结果是 `-9`。要避免这个问题，并且得到 `9`, 可以用 `(-3)**2`。

## 赋值运算符
赋值运算符应该是最为常见的运算符，它的作用是将右边的值赋给左边的变量。下面的例子演示了赋值运算符和复合赋值运算符的使用。
```python
"""
赋值运算符和复合赋值运算符
"""
a = 10
b = 3
a += b        # 相当于：a = a + b
a *= a + 2    # 相当于：a = a * (a + 2)
print(a)      
```

## 比较运算符和逻辑运算符
比较运算符有的地方也称为关系运算符，包括`==、!=、<、>、<=、>=`，

比较相等用的是`==`，注意这个地方是两个等号，因为`=`是赋值运算符，`==`才是比较相等的比较运算符。

比较运算符会产生布尔值，要么是True要么是False。

逻辑运算符有三个，分别是`and`、`or`和`not`。
#### and
字面意思是“而且”，and运算符会连接两个布尔值，
如果两个布尔值都是True，那么运算的结果就是True；
左右两边的布尔值有一个是False，最终的运算结果就是False。
如果and左边的布尔值是False，不管右边的布尔值是什么，最终的结果都是False，所以在做运算的时候右边的值会被跳过（短路处理），
这也就意味着在and运算符左边为False的情况下，右边的表达式根本不会执行。
#### or
or字面意思是“或者”，
or运算符也会连接两个布尔值，
如果两个布尔值有任意一个是True，那么最终的结果就是True。
当然，or运算符也是有短路功能的，
在它左边的布尔值为True的情况下，右边的表达式根本不会执行
#### not
not运算符的后面会跟上一个布尔值，它的作用是得到与该布尔值相反的值，也就是说，后面的布尔值如果是True运算结果就是False，而后面的布尔值如果是False则运算结果就是True。

```python
"""
比较运算符和逻辑运算符的使用
"""
flag0 = 1 == 1
flag1 = 3 > 2
flag2 = 2 < 1
flag3 = flag1 and flag2
flag4 = flag1 or flag2
flag5 = not (1 != 2)
print('flag0 =', flag0)    # flag0 = True
print('flag1 =', flag1)    # flag1 = True
print('flag2 =', flag2)    # flag2 = False
print('flag3 =', flag3)    # flag3 = False
print('flag4 =', flag4)    # flag4 = True
print('flag5 =', flag5)    # flag5 = False
```

> **说明**：比较运算符的优先级高于赋值运算符，所以`flag1 = 1 == 1`先做`1 == 1`产生布尔值`True`，再将这个值赋值给变量`flag1`。`print`函数可以输出多个值，多个值之间可以用`,`进行分隔，输出的内容之间默认以空格分开。









